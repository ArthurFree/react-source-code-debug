# 概览
当render阶段完成后，意味着在内存中构建的workInProgress树所有更新工作已经完成，这包括树中fiber节点的更新、diff、effectTag的标记、effectList的
收集。此时workInProgress树的完整形态如下：

![current树和workInProgress树](http://neroht.com/commitFiber.jpg)

和current树相比，它们的结构上固然存在区别，变化的fiber节点也存在于workInProgress树，但要将这些节点应用到DOM上却不会循环整棵树，而是通过循环effectList这个链表
来实现，这样保证了只针对有变化的节点做工作。

# 三个阶段

整个commit阶段分为三个子阶段，每个子节点都会从头到尾循环effectList。
* before mutation：读取组件变更前的状态，针对classComponent，调用getSnapshotBeforeUpdate，让我们可以在DOM变更前获取组件实例的信息。
* mutation：对需要改变DOM的节点（effectTag包含Placement、Update、PlacementAndUpdate、Deletion），进行相应的DOM操作。针对类组件，调用componentWillUnmount
* layout：在DOM操作完成后，读取组件的状态，针对类组件调用生命周期componentDidMount和componentDidUpdate

